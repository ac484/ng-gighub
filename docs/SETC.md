
---

# SETC 工作流程定義

> 文件版本: 3.23.0  
> 更新日期: 2025-12-16  
> 文件性質: 系統流程與模組協作定義（不包含實作進度與任務引用）

---

## 一、整體設計原則

- 系統採 **事件驅動（Event-Driven）流程**
- 模組彼此解耦，透過事件與 Facade 溝通
- 所有狀態變更皆可被稽核（Audit Log）
- 核心實體（Contract / Task / Issue / Acceptance / Finance）皆具備獨立生命週期
- 自動節點不包含 UI 行為，僅負責狀態推進與資料產生

---

## 零、合約建立與來源流程

合約上傳（PDF / 圖檔）【手動】  
↓  
合約建檔（基本資料、業主、承商）【手動】  
↓  
合約解析（OCR / AI 解析條款、金額、工項）【自動】  
↓  
合約確認（確認解析結果或人工補齊）【手動】  
↓  
合約狀態：待生效  
↓  
合約生效（僅已生效合約可建立任務）【手動】

---

## 一、任務與施工階段

任務建立（關聯合約 / 工項 / 金額）【手動】  
↓  
指派使用者或團隊【手動】  
↓  
施工執行  
↓  
提報完成【手動】  
↓  
管理確認完成【手動】

> 此節點僅確認施工責任完成，不等同於驗收完成

---

## 二、品質與驗收階段

自動建立施工日誌【自動】  
↓  
自動建立 QC 待驗【自動】  
↓  
QC 通過？

- 否  
  - 建立缺失單【自動】  
  - 整改【手動】  
  - 複驗【手動】  
  - 回到 QC 判定

- 是  
  ↓  
  驗收【手動】

---

### 驗收判定流程

驗收通過？

- 否  
  - 建立問題單【可手動 / 可自動】  
  - 問題處理【手動】  
  - 回到驗收

- 是  
  ↓  
  驗收資料封存【自動】  
  ↓  
  進入保固期【自動】

---

## 保固期管理流程

保固期間：

- 發生保固缺失？
  - 是  
    - 建立問題單【可手動 / 可自動】  
    - 保固維修【手動】  
    - 結案【手動】

  - 否  
    - 持續保固監控

保固期滿【自動】  
↓  
最終驗收結案【手動】

---

## 三、財務與成本階段

金額 / 比例確認（可請款比例 / 可付款比例）【手動】  
↓  
建立可請款清單 + 可付款清單【自動】  
（業主 / 承商分離）  
↓  
請款 / 付款流程【手動】

流程狀態：

- 草稿  
- 送出  
- 審核  
- 開票  
- 收款 / 付款

---

### 財務審核流程

審核結果：

- 通過 → 繼續流程  
- 退回 → 補件 → 修正 → 再次審核

---

### 財務狀態同步

更新任務款項狀態【自動】

- 請款進度百分比  
- 付款進度百分比

---

### 成本與分析

自動計入成本管理：

- 實際成本  
- 應收金額  
- 應付金額  
- 毛利與成本分析

---

## 問題單（Issue）設計原則

- 問題單為 **獨立模組**
- 不專屬於驗收流程
- 可由多來源建立
- 具備完整生命週期

### 問題單生命週期

open → in_progress → resolved → verified → closed

---

### 問題單建立來源（概念）

- 驗收失敗
- QC 檢驗失敗
- 保固缺失
- 安全事件
- 使用者手動建立

---

## 事件與自動化原則

- 所有自動流程皆由 **事件或 Queue 觸發**
- 狀態改變即產生事件
- 事件不包含 UI 或使用者互動邏輯

---

## 稽核與權限控制

### Audit Log（必要）

所有【手動】節點需記錄：

- 操作人
- 操作時間
- 狀態變更前後
- 備註或原因

---

### 權限設計

- 不同角色可操作不同節點
- 權限不硬編碼於 UI
- 由模組層或政策層控管

---

## 結語

本文件定義的是：

- **系統行為**
- **模組協作方式**
- **流程節點責任**
- **事件與狀態邊界**

不描述：

- 實作完成度
- 任務進度
- 單一技術細節

此文件可作為：

- 架構藍圖（Blueprint）
- 系統驗收基準
- 新模組設計依據
- 文件與程式碼對齊的上位規範


---